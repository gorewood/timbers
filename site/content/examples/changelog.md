+++
title = 'Changelog'
date = '2026-02-11'
tags = ['example', 'changelog']
+++

Copied from the repo's [CHANGELOG.md](https://github.com/gorewood/timbers/blob/main/CHANGELOG.md), which is generated by `just release` using `timbers draft changelog | claude -p --model opus`.

---

# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.6.0] - 2026-02-11

### Changed
- Pivoted storage from git notes to flat directory files (`.timbers/<id>.json`), enabling atomic writes and eliminating merge conflicts in concurrent worktrees
- Simplified `GitOps` interface from 8 methods to 4 (`HEAD`, `Log`, `CommitsReachableFrom`, `GetDiffstat`)
- Adopted `YYYY/MM/DD` directory layout for `.timbers/` entries to scale beyond flat-directory limits at high commit volumes
- Replaced `ReadDir` with `WalkDir` for recursive entry discovery across date-bucketed directories
- Rewrote `uninstall` command to clean up `.timbers/` directory with recursive cleanup

### Removed
- Removed all git notes code and references (`notes.go`, `notes_configured`, `remote_config` fields, `timbers notes push/fetch` commands)

### Technical
- Migrated 37 existing ledger entries from git notes to `.timbers/` flat files
- Extracted `atomicWrite` helper using temp-file-plus-rename pattern for crash-safe writes
- Added 14 integration tests proving file-per-entry storage is inherently merge-safe across branches


## [0.5.0] - 2026-02-11

### Added
- Multi-event Claude Code hooks covering the full session lifecycle: `SessionStart`, `PreCompact`, `Stop`, and `PostToolUse`
- Upgrade path that preserves existing hooks when adding new reinforcement points

### Changed
- Expanded hook configuration from single `SessionStart` hook to four reinforcement points, addressing 0% compliance for undocumented commits with single-hook approach
- Generalized hook management via `timbersHookConfig` slice with `addTimbersHooks`/`removeTimbersHooks` functions


## [0.4.0] - 2026-02-10

### Changed

- Rewrote Claude Code hook integration from shell scripts to JSON settings, fixing session-start context injection that previously had 0% adoption due to format mismatch
- Renamed `internal/prompt` package to `internal/draft` to match the `draft` command name
- Updated agent DX guide with v0.3+ learnings, JSON hook format documentation, and shell-script anti-pattern section

### Fixed

- Added graceful degradation when `timbers` is not installed â€” Claude Code hook now warns with install URL instead of erroring, unblocking adoption for team members without timbers
- Added `isTimbersPrimeCommand()` for backward-compatible detection of both legacy shell-script and new JSON hook formats

### Removed

- Removed legacy `.claude/hooks/user_prompt_submit.sh` shell script hook in favor of JSON settings
- Removed `history/` artifacts from version control


## [0.3.0] - 2026-02-10

### Added
- Added `git.InitNotesRef()` to create an empty notes namespace during `init`, so `prime` works immediately without requiring a manual first note
- Added tests for the `prime` guard silent-exit path and `doctor --fix` auto-install path
- Added TTY-aware lipgloss style sets to `doctor` and `init` output, following the existing `uninstall` pattern
- Added `NotesRefExists` guard to `prime` to prevent no-op runs in uninitialized repos

### Changed
- Switched Claude hooks from global to project-level by default; global install is now behind the `--global` flag
- Changed git hooks from default-on (`--no-hooks` to skip) to opt-in (`--hooks` to enable), avoiding conflicts with tools like beads that rely on `pre-commit`
- Renamed `warn` style to `skip` in `init` output styles for consistency
- Renamed `gpt-5` model alias to `gpt`
- Updated `agent-dx-guide` documentation to reflect opt-in hooks and project-level defaults

## [0.2.0] - 2026-02-10

### Added
- Added `--tag` filtering to `timbers query` command with OR semantics, supporting both repeated flags and comma-separated values
- Added `timbers changelog` command that generates markdown changelogs from ledger entries, grouped by tag
- Added `timbers draft` command (renamed from `prompt`) for document generation, with decision-log template in ADR format
- Added `.env.local` support for API keys via new `internal/envfile` package, loaded as fallback in root `PersistentPreRunE`
- Added cross-platform config directory support via new `internal/config` package with `Dir()` function, respecting `TIMBERS_CONFIG_HOME`, `XDG_CONFIG_HOME`, and Windows AppData
- Added CONFIG section to `doctor` command with checks for config dir, env files, API keys, and templates
- Added version check to `doctor` that queries GitHub releases API with graceful failure for dev builds and network errors
- Added draft status hint and stderr routing for errors/warnings when stdout is piped via `output.Printer` `WithStderr()`
- Added goreleaser configuration, GitHub Actions release workflow, and `install.sh` with checksum verification
- Added robustness for non-timbers git notes with `ErrNotTimbersNote`, schema validation, and `ListEntriesWithStats()`
- Added Configuration section to README documenting env file resolution, API key setup, and custom templates
- Added Installation section to README with `curl|bash` and `go install` methods
- Added MIT LICENSE, CONTRIBUTING.md, and CI workflow for test and lint

### Changed
- Renamed `prompt` command to `draft` and propagated rename across docs, justfile, and CI
- Surfaced `draft` command in `prime` output under a new Generating Documents section
- Rewrote README for open-source audience with badges and dogfood caveat
- Updated agent DX guide with v0.2 learnings
- Fixed org owner references from `rbergman` to `gorewood` in goreleaser and install script

### Fixed
- Fixed global state issue in `status.go` by switching to closure pattern
- Fixed `amend.go` output inconsistency
- Fixed `uninstall.go` icon usage
- Fixed `ListTemplates` override bug
- Fixed piped output corruption caused by errors and warnings being written to stdout instead of stderr

## [0.1.0] - 2026-02-10

Initial public release.

### Added

- **Core CLI** with `log`, `pending`, `show`, `status`, `query`, and `export` commands
- **`log` command** for recording work with structured what/why/how fields, `--auto` mode for extracting from commit messages, `--batch` mode for grouping by work-item trailers
- **`pending` command** showing undocumented commits since last ledger entry
- **`query` command** with `--last`, `--since`, `--until`, `--tags`, and `--oneline` filtering
- **`export` command** for JSON and Markdown output, with `--tag` filtering and directory output via `--out`
- **`draft` command** (document generation) rendering templates with ledger entries for LLM consumption or direct execution via `--model`
- **Built-in templates**: `changelog`, `decision-log`, `devblog`, `exec-summary`, `pr-description`, `release-notes`, `sprint-report`
- **`generate` command** as a composable LLM completion primitive with multi-provider support (Anthropic, OpenAI, Google, local)
- **`catchup` command** for auto-generating entries from undocumented commits using LLMs, with `--batch-size`, `--parallel`, and `--dry-run` support
- **`amend` command** for updating existing ledger entries (what/why/how/tags)
- **`prime` command** for agent session context injection with `--verbose` flag for recent entry details
- **`notes` subcommands** (`init`, `push`, `fetch`, `status`) for Git notes sync management
- **`init` command** for full setup including notes, hooks, and Claude integration
- **`onboard` command** for generating CLAUDE.md integration snippets
- **`doctor` command** for health checks and diagnostics
- **`uninstall` command** for clean removal from repos
- Multi-provider LLM client supporting Anthropic, OpenAI, Google, and local (LM Studio/Ollama) models
- `--json` flag on all commands for structured output
- `--dry-run` flag on all write operations
- Structured error JSON with recovery hints and consistent exit codes (0/1/2/3)
- Lipgloss terminal styling with TTY-aware rendering
- Pipe-safe output: errors and warnings routed to stderr when stdout is piped
- Goreleaser configuration for cross-platform binary releases (Linux, macOS, Windows)
- Install script (`install.sh`) with checksum verification
- GitHub Actions workflows for releases, dev blog generation, and CI (test + lint)
- Comprehensive documentation: tutorial, agent reference, LLM commands guide, publishing artifacts guide, agent DX guide, and spec

[0.4.0]: https://github.com/gorewood/timbers/releases/tag/v0.4.0
[0.3.0]: https://github.com/gorewood/timbers/releases/tag/v0.3.0
[0.2.0]: https://github.com/gorewood/timbers/releases/tag/v0.2.0
[0.1.0]: https://github.com/gorewood/timbers/releases/tag/v0.1.0
[0.5.0]: https://github.com/gorewood/timbers/releases/tag/v0.5.0
[0.6.0]: https://github.com/gorewood/timbers/releases/tag/v0.6.0
