{"schema":"timbers.devlog/v1","kind":"entry","id":"tb_2026-02-13T03:45:25Z_c32243","created_at":"2026-02-13T03:45:25.989278Z","updated_at":"2026-02-13T03:45:25.989278Z","workset":{"anchor_commit":"c32243303446a31eff075ff24049a95e11cc82d0","commits":["c32243303446a31eff075ff24049a95e11cc82d0"],"diffstat":{"files":5,"insertions":282,"deletions":7}},"summary":{"what":"Add AgentEnv interface and ClaudeEnv implementation","why":"Chose registry pattern over switch statement because the interface makes adding new agent envs self-contained -- each env registers itself via init()","how":"AgentEnv interface with Detect/Install/Remove/Check methods, ClaudeEnv wraps existing setup functions, registry with stable ordering"},"notes":"Debated registry vs switch. Registry adds one file per environment but each is self-contained with no changes needed to existing code. Switch would centralize all environments but every addition touches multiple files. Registry won because the goal is to make adding Gemini/Codex later a single-file task. The interface methods mirror what doctor/setup/init already need -- Detect for doctor, Install for setup, Remove for uninstall."}